module.exports=class GJDecode{decCommentFromHistory(comment){const{decB64}=require("./decB64.js");let spl=comment.split("~");let cmnt=[];for(let i=0;i<spl.length;i++){if(i%2!=0){cmnt.push(spl[i-1]+`~`+spl[i])}}let levelID=cmnt[1].split("~")[1];let commentContent=cmnt[0].split("~")[1];let playerID=cmnt[2].split("~")[1];let likes=cmnt[3].split("~")[1];let percent=cmnt[4].split("~")[1];let age=cmnt[5].split("~")[1];let messageID=cmnt[6].split("~")[1].split(":")[0];let username=cmnt[7].split("~")[0];if(Number(cmnt[7].split("~")[0])!=NaN)username=cmnt[9].split("~")[0];const res={username:username,content:decB64(commentContent),levelID:Number(levelID),playerID:Number(playerID),likes:Number(likes),percent:Number(percent),id:Number(messageID),age:age};return res}decMessage(msg){const{decB64}=require("./decB64.js");const XOR=require("./xor.js");const xor=new XOR;let spl=msg.split(":");let msgInfo=[];for(let i=0;i<spl.length;i++){if(i%2!=0){msgInfo.push(spl[i-1]+`:`+spl[i])}}let username=msgInfo[0].split("6:")[1];let playerID=msgInfo[1].split("3:")[1];let accID=msgInfo[2].split("2:")[1];let msgID=msgInfo[3].split("1:")[1];let title=msgInfo[4].split("4:")[1];let content=msgInfo[7].split("5:")[1];let age=msgInfo[8].split("7:")[1];return{username:username,title:decB64(title),content:xor.decrypt(content,14251),playerID:Number(playerID),accountID:Number(accID),messageID:Number(msgID),age:age}}decMsg(msg){const{decB64}=require("./decB64.js");let spl=msg.split("#")[0].split(":");let msgInfo=[];for(let i=0;i<spl.length;i++){if(i%2!=0){msgInfo.push(spl[i-1]+`:`+spl[i])}}let username=msgInfo[0].split("6:")[1];let playerID=msgInfo[1].split("3:")[1];let accID=msgInfo[2].split("2:")[1];let msgID=msgInfo[3].split("1:")[1];let title=msgInfo[4].split("4:")[1];let age=msgInfo[7].split("7:")[1];return{username:username,title:decB64(title),playerID:Number(playerID),accountID:Number(accID),messageID:Number(msgID),age:age}}decodeAccountPost(post){const{decB64}=require("./decB64.js");let postContent=post.split("2~")[1].split("~4~")[0];let likes=post.split("~4~")[1].split("~9~")[0];let age=post.split("~9~")[1].split("~6~")[0];let id=post.split("~6~")[1];if(id.includes("~"))id=post.split("~6~")[2];if(id.includes("#"))id=id.split("#")[0];const result={content:decB64(postContent).trim(),likes:Number(likes),age:age,id:Number(id)};return result}decodeGJComment(comment){const{decB64}=require("./decB64.js");let spl=comment.split("~");let cmnt=[];for(let i=0;i<spl.length;i++){if(i%2!=0){cmnt.push(spl[i-1]+`~`+spl[i])}}let commentContent=cmnt[0].split("2~")[1];let playerID=cmnt[1].split("3~")[1];let likes=cmnt[2].split("4~")[1];let percent=cmnt[4].split("10~")[1];let age=cmnt[5].split("9~")[1];let msgID=cmnt[6].split("6~")[1];let username=comment.split(":1~")[1].split("~9")[0];if(msgID.includes(":"))msgID=msgID.split(":")[0];const res={username:username,content:decB64(commentContent),playerID:Number(playerID),likes:Number(likes),percent:Number(percent),id:Number(msgID),age:age};return res}decodeGJGauntlet(gauntlet){let spl=gauntlet.split(":");let id=spl[1];let lvlList=spl[3];let arr=lvlList.split(",");const glIDs={1:"Fire",2:"Ice",3:"Poison",4:"Shadow",5:"Lava",6:"Bonus",7:"Chaos",8:"Demon",9:"Time",10:"Crystal",11:"Magic",12:"spike",13:"Monster",14:"Doom",15:"Death"};let list=[Number(arr[0]),Number(arr[1]),Number(arr[2]),Number(arr[3]),Number(arr[4].split("#")[0])];const result={name:`${glIDs[id]} Gauntlet`,levels:list};return result}decodeLevelRes(level){const{decB64}=require("./decB64.js");let spl=level.split(":");let levelInfo=[];for(let i=0;i<spl.length;i++){if(i%2!=0){levelInfo.push(spl[i-1]+`:`+spl[i])}}let id=levelInfo[0].split("1:")[1];let name=levelInfo[1].split("2:")[1];let version=levelInfo[2].split("5:")[1];let playerID=levelInfo[3].split("6:")[1];let difficulty=levelInfo[5].split("9:")[1];let downloads=levelInfo[6].split("10:")[1];let officialSong=levelInfo[7].split("12:")[1];let gameVersion=levelInfo[8].split("13:")[1];let likes=levelInfo[9].split("14:")[1];let demonBool=levelInfo[10].split("17:")[1];let stars=levelInfo[13].split("18:")[1];let ftrd=levelInfo[14].split("19:")[1];let epic=levelInfo[15].split("42:")[1];let objs=levelInfo[16].split("45:")[1];let desc=levelInfo[17].split("3:")[1];let length=levelInfo[18].split("15:")[1];let copiedID=levelInfo[19].split("30:")[1];let twoPlayer=levelInfo[20].split("31:")[1];let coins=levelInfo[21].split("37:")[1];let verifiedCoins=levelInfo[22].split("38:")[1];let starsRequested=levelInfo[23].split("39:")[1];let customSong=levelInfo[26].split("35:")[1].split("#")[0];let disliked=likes.includes("-")?true:false;if(desc.includes("/"))desc=desc.split("/")[0];if(decB64(desc)=="")desc="KE5vIGRlc2NyaXB0aW9uIHByb3ZpZGVkKQ==";let featured=Boolean(Number(ftrd));let difficultyDecoding={"-10":"Auto",0:"Unrated",10:"Easy",20:"Normal",30:"Hard",40:"Harder",50:"Insane"};if(Boolean(Number(demonBool))){difficultyDecoding={10:"Easy Demon",20:"Medium Demon",30:"Hard Demon",40:"Insane Demon",50:"Extreme Demon"}}const lengthDecoding={0:"Tiny",1:"Short",2:"Medium",3:"Long",4:"XL"};const decodeGameVersion={1:"Pre-1.7",2:"Pre-1.7",3:"Pre-1.7",4:"Pre-1.7",5:"Pre-1.7",6:"Pre-1.7",7:"Pre-1.7",10:"1.7",18:"1.8",19:"1.9",20:"2.0",21:"2.1"};let result={id:Number(id),name:name,description:decB64(desc),level_version:Number(version),difficulty:difficultyDecoding[difficulty],stars:Number(stars),downloads:Number(downloads),likes:Number(likes),disliked:disliked,length:lengthDecoding[length],demon:Boolean(Number(demonBool)),featured:featured,epic:Boolean(Number(epic)),objects:Number(objs),stars_requested:Number(starsRequested),game_version:decodeGameVersion[gameVersion],copied:Number(copiedID),large:Number(objs)>4e4?true:false,two_p:Boolean(Number(twoPlayer)),coins:Number(coins),verified_coins:Boolean(Number(verifiedCoins))};return{res:result,playerID:playerID,officialSong:officialSong,customSong:customSong}}decodeMapPack(mp){let spl=mp.split(":");let mpInfo=[];for(let i=0;i<spl.length;i++){if(i%2!=0){mpInfo.push(spl[i-1]+`:`+spl[i])}}let mappackID=mpInfo[0].split("1:")[1];let name=mpInfo[1].split("2:")[1];let list=mpInfo[2].split("3:")[1];let stars=mpInfo[3].split("4:")[1];let coins=mpInfo[4].split("5:")[1];let difficulty=mpInfo[5].split("6:")[1];let txtCol=mpInfo[6].split("7:")[1];let barCol=mpInfo[7].split("8:")[1];let firstLvl=list.split(",")[0];let secondLvl=list.split(",")[1];let thirdLvl=list.split(",")[2];let difficultyDecoder={0:"Auto",1:"Easy",2:"Normal",3:"Hard",4:"Harder",5:"Insane",6:"Hard Demon",7:"Easy Demon",8:"Medium Demon",9:"Insane Demon",10:"Extreme Demon"};const{rgbToHEX}=require("./rgbToHEX.js");const result={name:name,id:Number(mappackID),levels:[Number(firstLvl),Number(secondLvl),Number(thirdLvl)],stars:Number(stars),coins:Number(coins),difficulty:difficultyDecoder[difficulty],textColor:rgbToHEX(txtCol),barColor:rgbToHEX(barCol)};return result}decodeUserResult(user){let spl=user.split(":");let userInfo=[];for(let i=0;i<spl.length;i++){if(i%2!=0){userInfo.push(spl[i-1]+`:`+spl[i])}}let name=userInfo[0].split("1:")[1];let playerID=userInfo[1].split("2:")[1];let coins=userInfo[2].split("13:")[1];let userCoins=userInfo[3].split("17:")[1];let c1=userInfo[6].split("10:")[1];let c2=userInfo[7].split("11:")[1];let accID=userInfo[10].split("16:")[1];let stars=userInfo[11].split("3:")[1];let cp=userInfo[12].split("8:")[1];let demons=userInfo[13].split("4:")[1].split("#")[0];let colors=require("./colors.json");const{rgbToHEX}=require("./rgbToHEX.js");const result={username:name.trim(),playerID:Number(playerID),accountID:Number(accID),color1:rgbToHEX(colors[c1]),color2:rgbToHEX(colors[c2]),stars:Number(stars),secretCoins:Number(coins),userCoins:Number(userCoins),demons:Number(demons),creatorPoints:Number(cp)};return result}decScoresUser(user){let spl=user.split(":");let userInfo=[];for(let i=0;i<spl.length;i++){if(i%2!=0){userInfo.push(spl[i-1]+`:`+spl[i])}}let name=userInfo[0].split("1:")[1];let playerID=userInfo[1].split("2:")[1];let coins=userInfo[2].split("13:")[1];let userCoins=userInfo[3].split("17:")[1];let c1=userInfo[6].split("10:")[1];let c2=userInfo[7].split("11:")[1];let rank=userInfo[4].split("6:")[1];let accID=userInfo[10].split("16:")[1];let stars=userInfo[11].split("3:")[1];let cp=userInfo[12].split("8:")[1];let diamonds=userInfo[13].split("46:")[1];let demons=userInfo[14].split("4:")[1];let colors=require("./colors.json");const{rgbToHEX}=require("./rgbToHEX.js");const result={username:name.trim(),playerID:playerID,accountID:accID,rank:rank,color1:rgbToHEX(colors[c1]),color2:rgbToHEX(colors[c2]),stars:stars,diamonds:diamonds,secretCoins:coins,userCoins:userCoins,demons:demons,creatorPoints:cp};return result}decodeScore(s){let score=s.split(":");let username=score[1];let playerID=Number(score[3]);let accID=Number(score[15]);let percent=Number(score[17]);let rank=Number(score[19]);let icon=Number(score[5]);let iconType=score[11];let c1=score[7];let c2=score[9];let coins=Number(score[21]);let age=score[23];let iconTypes={0:"icon",1:"ship",2:"ball",3:"ufo",4:"wave",5:"robot",6:"spider"};let colors=require("./colors.json");const{rgbToHEX}=require("./rgbToHEX.js");return{username:username.trim(),playerID:playerID,accountID:accID,rank:rank,color1:rgbToHEX(colors[c1]),color2:rgbToHEX(colors[c2]),icon:icon,iconType:iconTypes[iconType],percent:percent,coins:coins,age:age}}};